<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <div th:fragment="form" x-data="{ invitationType: 'email' }">
        <form hx-post="/children/invitations/create"
              hx-target="#invitation-result"
              hx-swap="innerHTML"
              th:object="${invitationRequest}"
              class="space-y-4">
            
            <!-- Champ caché pour l'ID de l'enfant -->
            <input type="hidden" 
                   th:field="*{childId}">

            <!-- Sélection du type d'invitation -->
            <div class="flex space-x-4 mb-4">
                <button type="button"
                        @click="invitationType = 'email'"
                        :class="{ 'bg-blue-100 text-blue-700': invitationType === 'email', 'bg-gray-100 text-gray-700': invitationType !== 'email' }"
                        class="px-4 py-2 rounded-md flex items-center space-x-2 transition-colors duration-200">
                    <i class="fas fa-envelope"></i>
                    <span th:text="#{invitation.form.email}">Email</span>
                </button>
                <button type="button"
                        @click="invitationType = 'phone'"
                        :class="{ 'bg-blue-100 text-blue-700': invitationType === 'phone', 'bg-gray-100 text-gray-700': invitationType !== 'phone' }"
                        class="px-4 py-2 rounded-md flex items-center space-x-2 transition-colors duration-200">
                    <i class="fas fa-phone"></i>
                    <span th:text="#{invitation.form.phone}">Téléphone</span>
                </button>
            </div>

            <!-- Champ Email -->
            <div x-show="invitationType === 'email'"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 translate-y-1"
                 x-transition:enter-end="opacity-100 translate-y-0">
                <label for="email" class="block text-sm font-medium text-gray-700" th:text="#{invitation.form.email.label}">Email</label>
                <div class="mt-1">
                    <input type="email"
                           th:field="*{email}"
                           class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                           th:placeholder="#{invitation.form.email.placeholder}">
                </div>
                <div th:if="${#fields.hasErrors('email')}" 
                     class="mt-2 text-sm text-red-600" 
                     th:text="${#fields.errors('email')[0]}">
                </div>
            </div>

            <!-- Champ Téléphone -->
            <div x-show="invitationType === 'phone'"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 translate-y-1"
                 x-transition:enter-end="opacity-100 translate-y-0">
                <label for="phone" class="block text-sm font-medium text-gray-700" th:text="#{invitation.form.phone.label}">Numéro de téléphone</label>
                <div class="mt-1">
                    <input type="tel"
                           th:field="*{phone}"
                           class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                           th:placeholder="#{invitation.form.phone.placeholder}">
                </div>
                <div th:if="${#fields.hasErrors('phone')}" 
                     class="mt-2 text-sm text-red-600" 
                     th:text="${#fields.errors('phone')[0]}">
                </div>
            </div>

            <!-- Bouton d'envoi -->
            <div class="mt-4">
                <button type="submit"
                        class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <span th:text="#{invitation.form.submit}">Envoyer l'invitation</span>
                </button>
            </div>
        </form>
    </div>
</body>
</html> 